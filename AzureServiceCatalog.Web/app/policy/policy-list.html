
<ol class="breadcrumb">
    <li><a ui-sref="dashboard">Home</a></li>

    <li uib-dropdown>
        <a class="dropdown-toggle" ng-model="vm.selectedSubscription" uib-dropdown-toggle>
            <span>{{vm.selectedSubscription.displayName}}</span><i class="glyphicon glyphicon-chevron-down" style="top: 5px; margin-left: 5px;"></i>
        </a>
        <ul class="dropdown-menu" ng-repeat="sub in vm.subscriptions" ng-click="vm.getPoliciesForSelectedSubcription(sub.rowKey)">
            <li class="exactFit" ng-bind-html="sub.displayName"></li>
        </ul>
    </li>
    <li>Policies</li>
</ol>


<div ng-show="vm.isAuthenticated && !vm.isActivation && vm.userHasManageAccess">
    <h1>
        POLICIES
        <span style="float:right">
            <a class="btn btn-primary" ui-sref="edit-policy({subscriptionId: vm.selectedSubscription.rowKey, subscriptionName: vm.selectedSubscription.displayName})">
                <i class="glyphicon glyphicon-plus"></i>
                <span>Add New Policy</span>
            </a>
            <button class="btn btn-info" ng-click="vm.getPolicies()">
                <i class="glyphicon glyphicon-refresh"></i>
                Refresh
            </button>
            <button class="btn btn-warning" ui-sref="manage-policy-assignments">View Assignments</button>

        </span>
    </h1>

    <div>
        <table class="table table-striped table-hover table-condensed table-fixed-layout middle-align">
            <thead>
                <tr>
                    <th class="col-md-3">Policy Name</th>
                    <th class="col-md-8">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="selectable" ng-repeat="item in vm.policies | orderBy: 'name'" ui-sref="edit-policy({ subscriptionId: vm.selectedSubscription.rowKey, subscriptionName: vm.selectedSubscription.displayName, id: item.policy.name })">
                    <td class="col-md-3">
                        <a class="btn btn-link">{{vm.getPolicyDefName(item.policy)}}</a>
                    </td>
                    <td class="col-md-9 middle-align">{{item.policy.properties.description}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div ng-hide="vm.userHasManageAccess">
    <p>You do not have access to this page, please contact administrator</p>
</div>
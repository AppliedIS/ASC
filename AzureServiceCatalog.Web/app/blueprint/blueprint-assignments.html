<ol class="breadcrumb">
    <li><a ui-sref="dashboard">Home</a></li>
    <li uib-dropdown>
        <a class="dropdown-toggle" ng-model="vm.selectedSubscription" uib-dropdown-toggle>
            <span>{{vm.selectedSubscription.displayName}}</span><i class="glyphicon glyphicon-chevron-down" style="top: 5px; margin-left: 5px;"></i>
        </a>
        <ul class="dropdown-menu" ng-repeat="sub in vm.subscriptions" ng-click="vm.onSubscriptionChange(sub.rowKey)">
            <li class="exactFit" ng-bind-html="sub.displayName"></li>
        </ul>
    </li>
    <li><a ui-sref="blueprints-home">Blueprints</a></li>
    <li>Blueprint Assignments</li>
</ol>

<div>
    <div>
        <h1>
            {{vm.lodash.toUpper("Blueprint Assignments")}}
            <span style="float:right">
                <button class="btn btn-info" ng-click="vm.getBlueprintAssignments()">
                    <i class="glyphicon glyphicon-refresh"></i>
                    Refresh
                </button>
            </span>
        </h1>
    </div>
    <div>
        <table class="table table-striped table-hover table-condensed table-fixed-layout middle-align">
            <thead>
                <tr>
                    <th class="col-md-3">Assignment Name</th>
                    <th class="col-md-3">Blueprint Name</th>
                    <th class="col-md-3">Provisioning State</th>
                    <th class="col-md-2"></th>
                    <th class="col-md-1"></th>
                    <th class="col-md-1"></th>
                </tr>
            </thead>
            <tbody>
                <tr class="selectable" ng-repeat="blueprintAssignment in vm.blueprintAssignments | orderBy: 'name'">
                    <td class="col-md-3">
                        <a class="btn btn-link" ui-sref="update-blueprint-assignment({ subscriptionId: vm.subscriptionId, subscriptionName: vm.subscriptionName, blueprintAssignmentName: blueprintAssignment.name })">{{blueprintAssignment.name}}</a>
                    </td>
                    <td class="col-md-3 middle-align">{{blueprintAssignment.blueprintName}}</td>
                    <td class="col-md-3 middle-align">{{vm.lodash.startCase(blueprintAssignment.provisioningState)}}</td>
                    <td class="col-md-2 middle-align text-right"><button class="btn btn-warning" ng-click="vm.viewDetails(blueprintAssignment)">View Details...</button></td>
                    <td class="col-md-1 middle-align text-right"><button class="btn btn-warning" ui-sref="update-blueprint-assignment({ subscriptionId: vm.subscriptionId, subscriptionName: vm.subscriptionName, blueprintAssignmentName: blueprintAssignment.name })">Update</button></td>
                    <td class="middle-align text-right">
                        <button class="btn btn-warning pull-left" ng-click="vm.addBudget(blueprintAssignment)">
                            <i class="glyphicon glyphicon-tasks" title="View Budget" ng-show="blueprintAssignment.isBudgetAssigned"></i>
                            <i class="glyphicon glyphicon-plus" title="Add Budget..." ng-show="!blueprintAssignment.isBudgetAssigned"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>